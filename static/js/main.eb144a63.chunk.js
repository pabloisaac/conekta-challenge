(this["webpackJsonpconketa-challenge"]=this["webpackJsonpconketa-challenge"]||[]).push([[0],{144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(10),c=a.n(r),s=a(16),i={SET_LOGIN:"SET_LOGIN",SET_LOADING:"SET_LOADING",SET_MODAL_VISIBLE:"SET_MODAL_VISIBLE",SET_ITEM:"SET_ITEM",UPDATE_LIST_ITEMS:"UPDATE_LIST_ITEMS"},o=function(e){return{type:i.SET_LOGIN,data:e}},u=function(e){return{type:i.SET_LOADING,data:e}},l=function(e){return{type:i.SET_MODAL_VISIBLE,data:e}},d=function(e){return{type:i.SET_ITEM,data:e}},b=function(e){return{type:i.UPDATE_LIST_ITEMS,data:e}},p=Object(n.createContext)({}),j={login:!1,loading:!1,modalVisible:!1,item:{},listItems:[]},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.SET_LOGIN:return Object.assign({},e,{login:t.data});case i.SET_LOADING:return Object.assign({},e,{loading:t.data});case i.SET_MODAL_VISIBLE:return Object.assign({},e,{modalVisible:t.data});case i.SET_ITEM:return Object.assign({},e,{item:t.data});case i.UPDATE_LIST_ITEMS:return Object.assign({},e,{listItems:t.data});default:return}},h=a(5),f=a.n(h),O=a(8),x=a(40),v=a(13),g=a(19),y=a.n(g),I="https://conekta-appi.herokuapp.com",S=function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(I,"/login"),r={"content-type":"application/json"},c={credentials:{username:t,password:a}},e.next=5,y.a.post(n,c,{headers:r}).then((function(e){return e})).catch((function(e){console.log(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(O.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(I,"/api/records/lst"),n={"content-type":"application/json",Authorization:"Bearer ".concat(t)},e.next=4,y.a.get(a,{headers:n}).then((function(e){return e})).catch((function(e){console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(I,"/api/records/get/").concat(t),r={"content-type":"application/json",Authorization:"Bearer ".concat(a)},e.next=4,y.a.get(n,{headers:r}).then((function(e){return e})).catch((function(e){console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(I,"/api/records/del/").concat(t),r={"content-type":"application/json",Authorization:"Bearer ".concat(a)},e.next=4,y.a.delete(n,{headers:r}).then((function(e){return e})).catch((function(e){console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(I,"/api/records/put"),r={"content-type":"application/json",Authorization:"Bearer ".concat(a)},c={_id:t._id,street:t.street,numExt:t.numExt,numInt:t.numInt,cp:t.cp,suburb:t.suburb,delegation:t.delegation,city:t.city,status:t.status,country:t.country},e.next=5,y.a.put(n,c,{headers:r}).then((function(e){return e})).catch((function(e){console.log(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(I,"/api/records/post"),r={"content-type":"application/json",Authorization:"Bearer ".concat(a)},c={street:t.street,numExt:t.numExt,numInt:t.numInt,cp:t.cp,suburb:t.suburb,delegation:t.delegation,city:t.city,status:t.status,country:t.country},e.next=5,y.a.post(n,c,{headers:r}).then((function(e){return e})).catch((function(e){console.log(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),T=(a(48),a.p+"static/media/conekta-logo.6bb2d24e.svg"),C=a(3),L=function(){return Object(C.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark navbar-color",children:Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)(x.b,{to:"/",className:"navbar-brand",children:Object(C.jsx)("a",{href:"/",children:Object(C.jsx)("img",{src:T,alt:"conekta logo"})})}),Object(C.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(x.c,{to:"/",className:"nav-link",children:"Formulario"})}),Object(C.jsx)("li",{children:Object(C.jsx)(x.c,{to:"/admin",className:"nav-link",children:"Administrador"})})]})]})})},A="https://api.copomex.com",P="dc301656-6a80-464c-b645-a351c9c1746a",D=function(){var e=Object(O.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"GET",headers:{"content-type":"application/json"},url:"".concat(A,"/query/info_cp/").concat(t,"?token=").concat(P)},e.next=4,y()(a);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),M=a(42),W=a(46),V=a.n(W),B=a(17),G=a.n(B),z=a.p+"static/media/Login-02.2ef26962.svg",F=function(e){var t=e.mode,a=Object(n.useContext)(p),r=a.state,c=a.dispatch;Object(n.useEffect)((function(){"edit"===t&&(d(r.item.street),x(r.item.numExt),I(r.item.numInt),T(r.item.cp),W(r.item.suburb),K(r.item.delegation),ae(r.item.city),le(r.item.status),Oe(r.item.country))}),[]);var i=Object(n.useState)(""),o=Object(s.a)(i,2),u=o[0],d=o[1],j=Object(n.useState)(""),m=Object(s.a)(j,2),h=m[0],x=m[1],v=Object(n.useState)(""),g=Object(s.a)(v,2),y=g[0],I=g[1],S=Object(n.useState)(""),k=Object(s.a)(S,2),w=k[0],T=k[1],L=Object(n.useState)(""),A=Object(s.a)(L,2),P=A[0],W=A[1],B=Object(n.useState)([]),F=Object(s.a)(B,2),H=F[0],R=F[1],U=Object(n.useState)(""),J=Object(s.a)(U,2),q=J[0],K=J[1],Q=Object(n.useState)([]),X=Object(s.a)(Q,2),Y=X[0],Z=X[1],$=Object(n.useState)(""),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)([]),re=Object(s.a)(ne,2),ce=re[0],se=re[1],ie=Object(n.useState)([]),oe=Object(s.a)(ie,2),ue=oe[0],le=oe[1],de=Object(n.useState)([]),be=Object(s.a)(de,2),pe=be[0],je=be[1],me=Object(n.useState)(""),he=Object(s.a)(me,2),fe=he[0],Oe=he[1],xe=Object(n.useState)([]),ve=Object(s.a)(xe,2),ge=ve[0],ye=ve[1],Ie=function(){var e=Object(O.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={street:u,numExt:h,numInt:y,cp:w,suburb:P.value,delegation:q.value,city:te.value,status:ue.value,country:fe.value},e.next=3,_(t,sessionStorage.getItem("token"));case 3:a=e.sent,G.a.has(a,"status")&&200===a.status?V.a.fire("Registro Insertado!","Se creo el registro con #".concat(a.data.ops[0]._id),"success"):V.a.fire({icon:"error",title:"Oops...",text:"Error al guardar",footer:"Hubo un error al guardar el registro, por favor reintente!"}),Ee();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(O.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={_id:r.item._id,street:u,numExt:h,numInt:y,cp:w,suburb:P.value,delegation:q.value,city:te.value,status:ue.value,country:fe.value},e.next=3,N(t,sessionStorage.getItem("token"));case 3:if(a=e.sent,!G.a.has(a,"status")||200!==a.status){e.next=10;break}return e.next=7,ke();case 7:V.a.fire("Registro Actualizado!","Se actualizo el registro con #".concat(t._id),"success"),e.next=11;break;case 10:V.a.fire({icon:"error",title:"Oops...",text:"Error al actualizar",footer:"Hubo un error al actualizo el registro, por favor reintente!"});case 11:Ee();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){W(""),R([]),K(""),Z([]),ae(""),se([]),le(""),je([]),Oe(""),ye([]),T(""),d(""),x(""),I("")},ke=function(){var e=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(sessionStorage.getItem("token"));case 2:t=e.sent,G.a.has(t,"status")&&200===t.status&&c(b(t.data)),c(l(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(e){void 0!==e.target.name&&"street"===e.target.name&&d(e.target.value),void 0!==e.target.name&&"numExt"===e.target.name&&x(e.target.value),void 0!==e.target.name&&"numInt"===e.target.name&&I(e.target.value),void 0!==e.target.name&&"cp"===e.target.name&&Ne(e.target.value)},Ne=function(){var e=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(""),R([]),K(""),Z([]),ae(""),se([]),le(""),je([]),Oe(""),ye([]),T(t),e.next=13,_e(t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(O.a)(f.a.mark((function e(t){var a,n,r,c,s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],n=[],r=[],c=[],s=[],5!==t.length){e.next=11;break}return e.next=8,D(t);case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=void 0;case 12:void 0!==(i=e.t0)&&!i.error&&i.forEach((function(e){void 0===G.a.find(a,["value",e.response.estado])&&a.push({value:e.response.estado,label:e.response.estado}),void 0===G.a.find(n,["value",e.response.municipio])&&n.push({value:e.response.municipio,label:e.response.municipio}),void 0===G.a.find(r,["value",e.response.asentamiento])&&r.push({value:e.response.asentamiento,label:e.response.asentamiento}),void 0===G.a.find(c,["value",e.response.ciudad])&&c.push({value:e.response.ciudad,label:e.response.ciudad}),void 0===G.a.find(s,["value",e.response.pais])&&s.push({value:e.response.pais,label:e.response.pais})})),je(a),Z(n),R(r),se(c),ye(s);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"container-divs",children:[Object(C.jsx)("div",{className:"container-logo",children:Object(C.jsx)("img",{src:z,alt:"form logo"})}),Object(C.jsxs)("div",{className:"container form",children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Calle:"}),Object(C.jsx)("input",{className:"form-control",placeholder:"Ingrese Calle",type:"text",name:"street",value:u,onChange:we})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"N\xfamero exterior:"}),Object(C.jsx)("input",{className:"form-control",placeholder:"Ingrese N\xfamero exterior",type:"text",name:"numExt",value:h,onChange:we})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"N\xfamero interior:"}),Object(C.jsx)("input",{className:"form-control",placeholder:"Ingrese N\xfamero interior",type:"text",name:"numInt",value:y,onChange:we})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"C\xf3digo postal"}),Object(C.jsx)("input",{className:"form-control",placeholder:"Ingrese CP a buscar..",type:"text",name:"cp",value:w,onChange:we})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Colonia:"}),Object(C.jsx)(M.a,{options:H,onChange:function(e){return W(e)},defaultValue:P,value:P,isSearchable:!0})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Municipio / Delegaci\xf3n:"}),Object(C.jsx)(M.a,{options:Y,onChange:function(e){return K(e)},defaultValue:q,value:q,isSearchable:!0})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Ciudad:"}),Object(C.jsx)(M.a,{options:ce,onChange:function(e){return ae(e)},defaultValue:te,value:te,isSearchable:!0})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Estado:"}),Object(C.jsx)(M.a,{options:pe,onChange:function(e){return le(e)},defaultValue:ue,value:ue,isSearchable:!0})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{children:"Pa\xeds:"}),Object(C.jsx)(M.a,{options:ge,onChange:function(e){return Oe(e)},defaultValue:fe,value:fe,isSearchable:!0})]}),Object(C.jsx)("div",{className:"btn-group",children:Object(C.jsx)("button",{type:"submit",disabled:!r.login,className:"btn btn-color",onClick:"edit"===t&&Se||void 0===t&&Ie,children:"edit"===t?"Editar":void 0===t&&"Guardar"})})]})]})},H=a(181),R=a(188),U=a(190),J=a(192),q=a(186),K=a(189),Q=a(191),X=a(194),Y=a(184),Z=a(187),$=a(82),ee=a.n($),te=a(83),ae=a.n(te),ne=a(193),re=[{id:"_id",label:"#ID",minWidth:150},{id:"street",label:"Calle",minWidth:120},{id:"numExt",label:"N\xfamero Exterior",minWidth:80},{id:"numInt",label:"N\xfamero Interior",minWidth:80},{id:"cp",label:"C\xf3digo Postal",minWidth:80},{id:"suburb",label:"Colonia",minWidth:140},{id:"delegation",label:"Municipio / Delegaci\xf3n",minWidth:140},{id:"city",label:"Ciudad",minWidth:150},{id:"status",label:"Estado",minWidth:150},{id:"country",label:"Pa\xeds",minWidth:140},{id:"actions",label:"",minWidth:130}],ce=Object(H.a)({root:{width:"100%"},container:{maxHeight:440}}),se=function(){var e=Object(n.useContext)(p),t=e.state,a=e.dispatch,r=ce(),c=Object(n.useState)(0),i=Object(s.a)(c,2),o=i[0],j=i[1],m=Object(n.useState)(10),h=Object(s.a)(m,2),x=h[0],v=h[1],g=function(){var e=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(u(!0)),e.next=3,E(sessionStorage.getItem("token"));case 3:t=e.sent,G.a.has(t,"status")&&200===t.status?a(b(t.data)):a(b([])),a(u(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(u(!0)),e.next=3,w(t,sessionStorage.getItem("token"));case 3:if(n=e.sent,!G.a.has(n,"status")||200!==n.status){e.next=7;break}return e.next=7,g();case 7:a(u(!1));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(O.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,sessionStorage.getItem("token"));case 2:n=e.sent,G.a.has(n,"status")&&200===n.status&&(a(d({})),r={_id:n.data._id,cp:n.data.cp,street:n.data.street,numExt:n.data.numExt,numInt:n.data.numInt,suburb:{label:n.data.suburb,value:n.data.suburb},delegation:{label:n.data.delegation,value:n.data.delegation},city:{label:n.data.city,value:n.data.city},status:{label:n.data.status,value:n.data.status},country:{label:n.data.country,value:n.data.country}},a(d(r)),a(l(!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[!t.loading&&Object(C.jsxs)(R.a,{className:r.root,children:[Object(C.jsx)(K.a,{children:Object(C.jsxs)(U.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(C.jsx)(Q.a,{children:[Object(C.jsx)(Y.a,{children:re.map((function(e){return Object(C.jsx)(q.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})]}),Object(C.jsx)(J.a,{children:[t.listItems.slice(o*x,o*x+x).map((function(e){return Object(C.jsx)(Y.a,{hover:!0,role:"checkbox",tabIndex:-1,children:re.map((function(t){var a=e[t.id];return Object(C.jsxs)(q.a,{align:t.align,children:[t.format&&"number"===typeof a?t.format(a):a,"actions"===t.id&&[Object(C.jsx)(Z.a,{color:"secondary","aria-label":"delete",onClick:function(){return y(e._id)},children:Object(C.jsx)(ee.a,{})}),Object(C.jsx)(Z.a,{color:"primary","aria-label":"edit",onClick:function(){return I(e._id)},children:Object(C.jsx)(ae.a,{})})]]},t.id)}))},e._id)}))]})]})}),Object(C.jsx)(X.a,{rowsPerPageOptions:[10,25,100],component:"div",count:t.listItems.length,rowsPerPage:x,page:o,onChangePage:function(e){j(e)},onChangeRowsPerPage:function(e){v(+e.target.value),j(0)}})]}),t.loading&&Object(C.jsx)("div",{className:"center-spinner",children:Object(C.jsx)(ne.a,{})})]})},ie=a(195),oe=function(){var e=Object(n.useContext)(p),t=e.state,a=e.dispatch,r=function(){var e=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(sessionStorage.getItem("token"));case 2:t=e.sent,G.a.has(t,"status")&&200===t.status&&a(b(t.data)),a(l(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(ie.a,{open:t.modalVisible,onClose:r,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",className:"modal-css",children:Object(C.jsx)(R.a,{elevation:3,className:"paper-css",children:Object(C.jsx)(F,{mode:"edit"})})})})},ue=function(){var e=Object(n.useContext)(p).dispatch,t=function(){var t=Object(O.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(u(!0)),t.next=3,E(sessionStorage.getItem("token"));case 3:a=t.sent,G.a.has(a,"status")&&200===a.status?e(b(a.data)):e(b([])),e(u(!1));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){t()}),[]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(se,{}),Object(C.jsx)(oe,{})]})},le=function(){var e=Object(n.useContext)(p),t=e.state,a=e.dispatch;return Object(n.useEffect)((function(){Object(O.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.login){e.next=5;break}return e.next=3,S("test","test");case 3:n=e.sent,G.a.has(n,"status")&&200===n.status?(a(o(!0)),sessionStorage.setItem("token",n.data.token)):a(o(!1));case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(C.jsxs)(x.a,{basename:window.location.pathname||"",children:[Object(C.jsx)(L,{}),Object(C.jsx)("main",{children:Object(C.jsxs)(v.c,{children:[Object(C.jsx)(v.a,{exact:!0,path:"/",render:function(){return Object(C.jsx)(F,{})}}),Object(C.jsx)(v.a,{exact:!0,path:"/admin",render:function(){return Object(C.jsx)(ue,{})}})]})})]})},de=function(){var e=Object(n.useReducer)(m,j),t=Object(s.a)(e,2),a={state:t[0],dispatch:t[1]};return Object(C.jsx)(p.Provider,{value:a,children:Object(C.jsx)(le,{})})};c.a.render(Object(C.jsx)(de,{}),document.getElementById("root"))},48:function(e,t,a){}},[[144,1,2]]]);
//# sourceMappingURL=main.eb144a63.chunk.js.map