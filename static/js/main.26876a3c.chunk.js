(this["webpackJsonpconketa-challenge"]=this["webpackJsonpconketa-challenge"]||[]).push([[0],{144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(10),c=a.n(r),s=a(16),o={SET_LOGIN:"SET_LOGIN",SET_LOADING:"SET_LOADING",SET_MODAL_VISIBLE:"SET_MODAL_VISIBLE",SET_ITEM:"SET_ITEM",UPDATE_LIST_ITEMS:"UPDATE_LIST_ITEMS",SET_MODE:"SET_MODE"},i=function(e){return{type:o.SET_LOGIN,data:e}},u=function(e){return{type:o.SET_LOADING,data:e}},l=function(e){return{type:o.SET_MODAL_VISIBLE,data:e}},d=function(e){return{type:o.SET_ITEM,data:e}},b=function(e){return{type:o.UPDATE_LIST_ITEMS,data:e}},p=function(e){return{type:o.SET_MODE,data:e}},j=Object(n.createContext)({}),m={login:!1,loading:!1,modalVisible:!1,item:{},listItems:[],mode:"SAVE"},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.SET_LOGIN:return Object.assign({},e,{login:t.data});case o.SET_LOADING:return Object.assign({},e,{loading:t.data});case o.SET_MODAL_VISIBLE:return Object.assign({},e,{modalVisible:t.data});case o.SET_ITEM:return Object.assign({},e,{item:t.data});case o.UPDATE_LIST_ITEMS:return Object.assign({},e,{listItems:t.data});case o.SET_MODE:return Object.assign({},e,{mode:t.data});default:return}},h=a(5),O=a.n(h),x=a(8),v=a(40),g=a(13),E=a(19),I=a.n(E),S="https://conekta-appi.herokuapp.com",y=function(){var e=Object(x.a)(O.a.mark((function e(t,a){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(S,"/login"),r={"content-type":"application/json"},c={credentials:{username:t,password:a}},e.next=5,I.a.post(n,c,{headers:r}).then((function(e){return e})).catch((function(e){console.log(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(S,"/api/records/lst"),n={"content-type":"application/json",Authorization:"Bearer ".concat(t)},e.next=4,I.a.get(a,{headers:n}).then((function(e){return e})).catch((function(e){console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(x.a)(O.a.mark((function e(t,a){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(S,"/api/records/get/").concat(t),r={"content-type":"application/json",Authorization:"Bearer ".concat(a)},e.next=4,I.a.get(n,{headers:r}).then((function(e){return e})).catch((function(e){console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(x.a)(O.a.mark((function e(t,a){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(S,"/api/records/del/").concat(t),r={"content-type":"application/json",Authorization:"Bearer ".concat(a)},e.next=4,I.a.delete(n,{headers:r}).then((function(e){return e})).catch((function(e){console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(x.a)(O.a.mark((function e(t,a){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(S,"/api/records/put"),r={"content-type":"application/json",Authorization:"Bearer ".concat(a)},c={_id:t._id,street:t.street,numExt:t.numExt,numInt:t.numInt,cp:t.cp,suburb:t.suburb,delegation:t.delegation,city:t.city,status:t.status,country:t.country},e.next=5,I.a.put(n,c,{headers:r}).then((function(e){return e})).catch((function(e){console.log(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(x.a)(O.a.mark((function e(t,a){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(S,"/api/records/post"),r={"content-type":"application/json",Authorization:"Bearer ".concat(a)},c={street:t.street,numExt:t.numExt,numInt:t.numInt,cp:t.cp,suburb:t.suburb,delegation:t.delegation,city:t.city,status:t.status,country:t.country},e.next=5,I.a.post(n,c,{headers:r}).then((function(e){return e})).catch((function(e){console.log(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),C=(a(47),a.p+"static/media/conekta-logo.6bb2d24e.svg"),D=a(3),A=function(){return Object(D.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark navbar-color",children:Object(D.jsxs)("div",{className:"container",children:[Object(D.jsx)(v.b,{to:"/",className:"navbar-brand",children:Object(D.jsx)("img",{src:C,alt:"conekta logo"})}),Object(D.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(D.jsx)("li",{className:"nav-item",children:Object(D.jsx)(v.c,{to:"/",className:"nav-link",children:"Formulario"})}),Object(D.jsx)("li",{children:Object(D.jsx)(v.c,{to:"/admin",className:"nav-link",children:"Administrador"})})]})]})})},L="https://api.copomex.com",M="dc301656-6a80-464c-b645-a351c9c1746a",P=function(){var e=Object(x.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"GET",headers:{"content-type":"application/json"},url:"".concat(L,"/query/info_cp/").concat(t,"?token=").concat(M)},e.next=4,I()(a);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),V=a(42),W=a(56),B=a.n(W),G=a(18),z=a.n(G),F=a.p+"static/media/Login-02.2ef26962.svg",H=function(){var e=Object(n.useContext)(j),t=e.state,a=e.dispatch;Object(n.useEffect)((function(){"EDIT"===t.mode&&(i(t.item.street),m(t.item.numExt),g(t.item.numInt),y(t.item.cp),A(t.item.suburb),J(t.item.delegation),ee(t.item.city),ie(t.item.status),fe(t.item.country))}),[]);var r=Object(n.useState)(""),c=Object(s.a)(r,2),o=c[0],i=c[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),p=d[0],m=d[1],f=Object(n.useState)(""),h=Object(s.a)(f,2),v=h[0],g=h[1],E=Object(n.useState)(""),I=Object(s.a)(E,2),S=I[0],y=I[1],T=Object(n.useState)(""),_=Object(s.a)(T,2),C=_[0],A=_[1],L=Object(n.useState)([]),M=Object(s.a)(L,2),W=M[0],G=M[1],H=Object(n.useState)(""),R=Object(s.a)(H,2),U=R[0],J=R[1],q=Object(n.useState)([]),K=Object(s.a)(q,2),Q=K[0],X=K[1],Y=Object(n.useState)(""),Z=Object(s.a)(Y,2),$=Z[0],ee=Z[1],te=Object(n.useState)([]),ae=Object(s.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)([]),se=Object(s.a)(ce,2),oe=se[0],ie=se[1],ue=Object(n.useState)([]),le=Object(s.a)(ue,2),de=le[0],be=le[1],pe=Object(n.useState)(""),je=Object(s.a)(pe,2),me=je[0],fe=je[1],he=Object(n.useState)([]),Oe=Object(s.a)(he,2),xe=Oe[0],ve=Oe[1],ge=function(){var e=Object(x.a)(O.a.mark((function e(){var a,n,r,c,s,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===o||""===p||""===v||""===S||""===C.value||""===U.value||""===$.value||""===oe.value||""===me.value){e.next=24;break}if(a={_id:"EDIT"===t.mode?t.item._id:null,street:o,numExt:p,numInt:v,cp:S,suburb:C.value,delegation:U.value,city:$.value,status:oe.value,country:me.value},"EDIT"!==t.mode){e.next=8;break}return e.next=5,w(a,sessionStorage.getItem("token"));case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=N(a,sessionStorage.getItem("token"));case 9:if(n=e.t0,!z.a.has(n,"status")||200!==n.status){e.next=18;break}return r="EDIT"===t.mode?"Registro Actualizado!":"Registro Insertado!",c="EDIT"===t.mode?"Se actualizo el registro con #".concat(a._id):"Se creo el registro con #".concat(n.data.ops[0]._id),e.next=15,Ie();case 15:B.a.fire(r,c,"success"),e.next=21;break;case 18:s="EDIT"===t.mode?"Error al actualizar":"Error al insertar",i="EDIT"===t.mode?"Hubo un error al actualizo el registro, por favor reintente!":"Hubo un error al insertar el registro, por favor reintente!",B.a.fire({icon:"error",title:"Oops...",text:s,footer:i});case 21:Ee(),e.next=25;break;case 24:B.a.fire({icon:"error",title:"Oops...",text:"Campos incompletos!",footer:"Debe completar todos los campos para continuar, por favor reintente!"});case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){A(""),G([]),J(""),X([]),ee(""),re([]),ie(""),be([]),fe(""),ve([]),y(""),i(""),m(""),g("")},Ie=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(sessionStorage.getItem("token"));case 2:t=e.sent,z.a.has(t,"status")&&200===t.status&&a(b(t.data)),a(l(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(e){void 0!==e.target.name&&"street"===e.target.name&&i(e.target.value),void 0!==e.target.name&&"numExt"===e.target.name&&m(e.target.value),void 0!==e.target.name&&"numInt"===e.target.name&&g(e.target.value),void 0!==e.target.name&&"cp"===e.target.name&&ye(e.target.value)},ye=function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(""),G([]),J(""),X([]),ee(""),re([]),ie(""),be([]),fe(""),ve([]),y(t),e.next=13,ke(t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(x.a)(O.a.mark((function e(t){var a,n,r,c,s,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],n=[],r=[],c=[],s=[],5!==t.length){e.next=11;break}return e.next=8,P(t);case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=void 0;case 12:void 0!==(o=e.t0)&&!o.error&&o.forEach((function(e){void 0===z.a.find(a,["value",e.response.estado])&&a.push({value:e.response.estado,label:e.response.estado}),void 0===z.a.find(n,["value",e.response.municipio])&&n.push({value:e.response.municipio,label:e.response.municipio}),void 0===z.a.find(r,["value",e.response.asentamiento])&&r.push({value:e.response.asentamiento,label:e.response.asentamiento}),void 0===z.a.find(c,["value",e.response.ciudad])&&c.push({value:e.response.ciudad,label:e.response.ciudad}),void 0===z.a.find(s,["value",e.response.pais])&&s.push({value:e.response.pais,label:e.response.pais})})),be(a),X(n),G(r),re(c),ve(s);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{className:"container-divs",children:[Object(D.jsx)("div",{className:"container-logo",children:Object(D.jsx)("img",{src:F,alt:"form logo"})}),Object(D.jsxs)("div",{className:"container form",children:[Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Calle:"}),Object(D.jsx)("input",{className:"form-control",placeholder:"Ingrese Calle",type:"text",name:"street",value:o,onChange:Se})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"N\xfamero exterior:"}),Object(D.jsx)("input",{className:"form-control",placeholder:"Ingrese N\xfamero exterior",type:"text",name:"numExt",value:p,onChange:Se})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"N\xfamero interior:"}),Object(D.jsx)("input",{className:"form-control",placeholder:"Ingrese N\xfamero interior",type:"text",name:"numInt",value:v,onChange:Se})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"C\xf3digo postal"}),Object(D.jsx)("input",{className:"form-control",placeholder:"Ingrese CP a buscar..",type:"text",name:"cp",value:S,onChange:Se})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Colonia:"}),Object(D.jsx)(V.a,{options:W,onChange:function(e){return A(e)},defaultValue:C,value:C,isSearchable:!0})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Municipio / Delegaci\xf3n:"}),Object(D.jsx)(V.a,{options:Q,onChange:function(e){return J(e)},defaultValue:U,value:U,isSearchable:!0})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Ciudad:"}),Object(D.jsx)(V.a,{options:ne,onChange:function(e){return ee(e)},defaultValue:$,value:$,isSearchable:!0})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Estado:"}),Object(D.jsx)(V.a,{options:de,onChange:function(e){return ie(e)},defaultValue:oe,value:oe,isSearchable:!0})]}),Object(D.jsxs)("div",{className:"form-group",children:[Object(D.jsx)("label",{children:"Pa\xeds:"}),Object(D.jsx)(V.a,{options:xe,onChange:function(e){return fe(e)},defaultValue:me,value:me,isSearchable:!0})]}),Object(D.jsx)("div",{className:"btn-group",children:Object(D.jsx)("button",{type:"submit",disabled:!t.login,className:"btn btn-color",onClick:function(){return ge()},children:"EDIT"===t.mode?"Editar":"SAVE"===t.mode&&"Guardar"})})]})]})},R=a(181),U=a(188),J=a(190),q=a(192),K=a(186),Q=a(189),X=a(191),Y=a(194),Z=a(184),$=a(187),ee=a(82),te=a.n(ee),ae=a(83),ne=a.n(ae),re=a(193),ce=[{id:"_id",label:"#ID",minWidth:150},{id:"street",label:"Calle",minWidth:120},{id:"numExt",label:"N\xfamero Exterior",minWidth:80},{id:"numInt",label:"N\xfamero Interior",minWidth:80},{id:"cp",label:"C\xf3digo Postal",minWidth:80},{id:"suburb",label:"Colonia",minWidth:140},{id:"delegation",label:"Municipio / Delegaci\xf3n",minWidth:140},{id:"city",label:"Ciudad",minWidth:150},{id:"status",label:"Estado",minWidth:150},{id:"country",label:"Pa\xeds",minWidth:140},{id:"actions",label:"",minWidth:130}],se=Object(R.a)({root:{width:"100%"},container:{maxHeight:440}}),oe=function(){var e=Object(n.useContext)(j),t=e.state,a=e.dispatch,r=se(),c=Object(n.useState)(0),o=Object(s.a)(c,2),i=o[0],m=o[1],f=Object(n.useState)(10),h=Object(s.a)(f,2),v=h[0],g=h[1],E=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(u(!0)),e.next=3,k(sessionStorage.getItem("token"));case 3:t=e.sent,z.a.has(t,"status")&&200===t.status?a(b(t.data)):a(b([])),a(u(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(u(!0)),e.next=3,_(t,sessionStorage.getItem("token"));case 3:if(n=e.sent,!z.a.has(n,"status")||200!==n.status){e.next=7;break}return e.next=7,E();case 7:a(u(!1));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,sessionStorage.getItem("token"));case 2:n=e.sent,z.a.has(n,"status")&&200===n.status&&(a(d({})),r={_id:n.data._id,cp:n.data.cp,street:n.data.street,numExt:n.data.numExt,numInt:n.data.numInt,suburb:{label:n.data.suburb,value:n.data.suburb},delegation:{label:n.data.delegation,value:n.data.delegation},city:{label:n.data.city,value:n.data.city},status:{label:n.data.status,value:n.data.status},country:{label:n.data.country,value:n.data.country}},a(d(r)),a(l(!0)),a(p("EDIT")));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(D.Fragment,{children:[!t.loading&&Object(D.jsxs)(U.a,{className:r.root,children:[Object(D.jsx)(Q.a,{children:Object(D.jsxs)(J.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(D.jsx)(X.a,{children:[Object(D.jsx)(Z.a,{children:ce.map((function(e){return Object(D.jsx)(K.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})]}),Object(D.jsx)(q.a,{children:[t.listItems.slice(i*v,i*v+v).map((function(e){return Object(D.jsx)(Z.a,{hover:!0,role:"checkbox",tabIndex:-1,children:ce.map((function(t){var a=e[t.id];return Object(D.jsxs)(K.a,{align:t.align,children:[t.format&&"number"===typeof a?t.format(a):a,"actions"===t.id&&[Object(D.jsx)($.a,{color:"secondary","aria-label":"delete",onClick:function(){return I(e._id)},children:Object(D.jsx)(te.a,{})}),Object(D.jsx)($.a,{color:"primary","aria-label":"edit",onClick:function(){return S(e._id)},children:Object(D.jsx)(ne.a,{})})]]},t.id)}))},e._id)}))]})]})}),Object(D.jsx)(Y.a,{rowsPerPageOptions:[10,25,100],component:"div",count:t.listItems.length,rowsPerPage:v,page:i,onChangePage:function(e){m(e)},onChangeRowsPerPage:function(e){g(+e.target.value),m(0)}})]}),t.loading&&Object(D.jsx)("div",{className:"center-spinner",children:Object(D.jsx)(re.a,{})})]})},ie=a(195),ue=function(){var e=Object(n.useContext)(j),t=e.state,a=e.dispatch,r=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(sessionStorage.getItem("token"));case 2:t=e.sent,z.a.has(t,"status")&&200===t.status&&a(b(t.data)),a(l(!1)),a(p("SAVE"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(ie.a,{open:t.modalVisible,onClose:r,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",className:"modal-css",children:Object(D.jsx)(U.a,{elevation:3,className:"paper-css",children:Object(D.jsx)(H,{})})})})},le=function(){var e=Object(n.useContext)(j).dispatch,t=function(){var t=Object(x.a)(O.a.mark((function t(){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(u(!0)),t.next=3,k(sessionStorage.getItem("token"));case 3:a=t.sent,z.a.has(a,"status")&&200===a.status?e(b(a.data)):e(b([])),e(u(!1));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){t()}),[]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(oe,{}),Object(D.jsx)(ue,{})]})},de=function(){var e=Object(n.useContext)(j),t=e.state,a=e.dispatch;return Object(n.useEffect)((function(){Object(x.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.login){e.next=5;break}return e.next=3,y("test","test");case 3:n=e.sent,z.a.has(n,"status")&&200===n.status?(a(i(!0)),sessionStorage.setItem("token",n.data.token)):a(i(!1));case 5:case"end":return e.stop()}}),e)})))()}),[t.login]),Object(D.jsxs)(v.a,{basename:window.location.pathname||"",children:[Object(D.jsx)(A,{}),Object(D.jsx)("main",{children:Object(D.jsxs)(g.c,{children:[Object(D.jsx)(g.a,{exact:!0,path:"/",render:function(){return Object(D.jsx)(H,{})}}),Object(D.jsx)(g.a,{exact:!0,path:"/admin",render:function(){return Object(D.jsx)(le,{})}})]})})]})},be=function(){var e=Object(n.useReducer)(f,m),t=Object(s.a)(e,2),a={state:t[0],dispatch:t[1]};return Object(D.jsx)(j.Provider,{value:a,children:Object(D.jsx)(de,{})})};c.a.render(Object(D.jsx)(be,{}),document.getElementById("root"))},47:function(e,t,a){}},[[144,1,2]]]);
//# sourceMappingURL=main.26876a3c.chunk.js.map